!function(){var t=window.location.pathname.replace(/\/$/,"")||"/";if(""===t||"/"===t||"/index.html"===t){var e=document.createElement("canvas");e.style.cssText="position:fixed;inset:0;z-index:99;pointer-events:none;",e.width=window.innerWidth,e.height=window.innerHeight,document.body.appendChild(e);var i=e.getContext("2d");window.addEventListener("resize",function(){e.width=window.innerWidth,e.height=window.innerHeight});var n=["#00bcd4","#e040fb","#4dd0e1","#ce93d8"],a=["#0097a7","#7b1fa2","#00838f","#6a1b9a"];function o(){var t="dark"===document.documentElement.getAttribute("data-theme")?n:a;return t[Math.floor(Math.random()*t.length)]}function h(){return 60*-Math.log(Math.random()+1e-9)}var r={reset:function(){this.x=Math.random()*e.width,this.y=Math.random()*e.height;var t=Math.random()*Math.PI*2;this.dx=Math.cos(t),this.dy=Math.sin(t),this.mfp=h(),this.traveled=0,this.color=o(),this.speed=1.2+.8*Math.random(),this.age=0,this.maxAge=500+300*Math.random()},step:function(){if(this.age++,this.age>this.maxAge)this.reset();else{var t=this.age/this.maxAge,n=.35*Math.min(8*t,1,8*(1-t)),a=this.x,o=this.y;if(this.x+=this.dx*this.speed,this.y+=this.dy*this.speed,this.traveled+=this.speed,i.beginPath(),i.moveTo(a,o),i.lineTo(this.x,this.y),i.strokeStyle=this.color,i.lineWidth=1.8,i.globalAlpha=n,i.stroke(),this.traveled>=this.mfp){i.beginPath(),i.arc(this.x,this.y,1.5,0,2*Math.PI),i.fillStyle=this.color,i.globalAlpha=1.5*n,i.fill();var r=Math.random()*Math.PI*2;this.dx=Math.cos(r),this.dy=Math.sin(r),this.mfp=h(),this.traveled=0}(this.x<-100||this.x>e.width+100||this.y<-100||this.y>e.height+100)&&this.reset(),i.globalAlpha=1}}},s=document.createElement("div");s.style.cssText="position:fixed;bottom:1rem;left:1rem;z-index:102;pointer-events:none;font-family:monospace;font-size:0.65rem;opacity:0.35;letter-spacing:0.05em;",s.textContent="Monte Carlo photon random walk",document.body.appendChild(s),r.reset();for(var d=[r],l=1;l<4;l++){var m=Object.assign({},r);m.reset(),m.age=Math.floor(Math.random()*m.maxAge),d.push(m)}function x(){i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0,0,0,0.04)",i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="source-over";for(var t=0;t<d.length;t++)d[t].step();requestAnimationFrame(x)}x()}else{var y=["#00bcd4","#e040fb","#00bcd4","#e040fb","#4dd0e1","#ce93d8"],f=20,v=1.5,c=144,p=.9995,g=[],w=[],M=.72*window.innerWidth,u=.72*window.innerHeight;for(l=0;l<f;l++){var b=document.createElement("div");b.className="pixel-float",b.style.background=y[Math.floor(Math.random()*y.length)],document.body.appendChild(b),w.push(b),g.push({x:M+380*(Math.random()-.5),y:u+380*(Math.random()-.5),vx:0,vy:0,m:.8+.4*Math.random()})}var A=0,C=0,q=0;for(l=0;l<f;l++)A+=g[l].m,C+=g[l].x*g[l].m,q+=g[l].y*g[l].m;C/=A,q/=A;for(l=0;l<f;l++){var E=g[l].x-C,W=g[l].y-q,k=Math.sqrt(E*E+W*W)+1,z=.7*Math.sqrt(v*A/k);g[l].vx=-z*W/k+.25*(Math.random()-.5),g[l].vy=z*E/k+.25*(Math.random()-.5)}function H(){return{x0:.22*window.innerWidth,y0:.22*window.innerHeight,x1:.99*window.innerWidth,y1:.99*window.innerHeight}}var P=H();window.addEventListener("resize",function(){P=H()});var T=80;function I(){for(var t=g.length,e=new Array(t).fill(0),i=new Array(t).fill(0),n=P.x1-P.x0,a=P.y1-P.y0,o=n/2,h=a/2,r=0,s=0,d=0,l=0;l<t;l++)r+=g[l].m,s+=g[l].x*g[l].m,d+=g[l].y*g[l].m;s/=r,d/=r;var m=new Array(t);for(l=0;l<t;l++){var x=g[l].x-s,y=g[l].y-d,f=Math.sqrt(x*x+y*y);m[l]=g[l].m*Math.tanh(f/T)}for(l=0;l<t;l++)for(var M=g[l],u=l+1;u<t;u++){var b=g[u],A=b.x-M.x,C=b.y-M.y;A>o?A-=n:A<-o&&(A+=n),C>h?C-=a:C<-h&&(C+=a);var q=A*A+C*C+c,E=1/Math.sqrt(q),W=E*E*E;e[l]+=v*m[u]*W*A,i[l]+=v*m[u]*W*C,e[u]-=v*m[l]*W*A,i[u]-=v*m[l]*W*C}for(l=0;l<t;l++)g[l].vx=(g[l].vx+e[l])*p,g[l].vy=(g[l].vy+i[l])*p,g[l].x+=g[l].vx,g[l].y+=g[l].vy,g[l].x<P.x0?g[l].x+=n:g[l].x>=P.x1&&(g[l].x-=n),g[l].y<P.y0?g[l].y+=a:g[l].y>=P.y1&&(g[l].y-=a),w[l].style.left=g[l].x-4+"px",w[l].style.top=g[l].y-4+"px";requestAnimationFrame(I)}I()}}();