!function(){var t=window.location.pathname.replace(/\/$/,"")||"/";if(""===t||"/"===t||"/index.html"===t){var e=document.createElement("canvas");e.style.cssText="position:fixed;inset:0;z-index:99;pointer-events:none;",e.width=window.innerWidth,e.height=window.innerHeight,document.body.appendChild(e);var i=e.getContext("2d");window.addEventListener("resize",function(){e.width=window.innerWidth,e.height=window.innerHeight});var a=["#00bcd4","#e040fb","#4dd0e1","#ce93d8"],n=["#0097a7","#7b1fa2","#00838f","#6a1b9a"];function o(){var t="dark"===document.documentElement.getAttribute("data-theme")?a:n;return t[Math.floor(Math.random()*t.length)]}function r(){return 60*-Math.log(Math.random()+1e-9)}var h={reset:function(){this.x=Math.random()*e.width,this.y=Math.random()*e.height;var t=Math.random()*Math.PI*2;this.dx=Math.cos(t),this.dy=Math.sin(t),this.mfp=r(),this.traveled=0,this.color=o(),this.speed=1.2+.8*Math.random(),this.age=0,this.maxAge=500+300*Math.random()},step:function(){if(this.age++,this.age>this.maxAge)this.reset();else{var t=this.age/this.maxAge,a=.35*Math.min(8*t,1,8*(1-t)),n=this.x,o=this.y;if(this.x+=this.dx*this.speed,this.y+=this.dy*this.speed,this.traveled+=this.speed,i.beginPath(),i.moveTo(n,o),i.lineTo(this.x,this.y),i.strokeStyle=this.color,i.lineWidth=1.8,i.globalAlpha=a,i.stroke(),this.traveled>=this.mfp){i.beginPath(),i.arc(this.x,this.y,1.5,0,2*Math.PI),i.fillStyle=this.color,i.globalAlpha=1.5*a,i.fill();var h=Math.random()*Math.PI*2;this.dx=Math.cos(h),this.dy=Math.sin(h),this.mfp=r(),this.traveled=0}(this.x<-100||this.x>e.width+100||this.y<-100||this.y>e.height+100)&&this.reset(),i.globalAlpha=1}}},s=document.createElement("div");s.style.cssText="position:fixed;bottom:1rem;left:1rem;z-index:102;pointer-events:none;font-family:monospace;font-size:0.65rem;opacity:0.35;letter-spacing:0.05em;",s.textContent="Monte Carlo photon random walk",document.body.appendChild(s),h.reset();for(var d=[h],l=1;l<4;l++){var x=Object.assign({},h);x.reset(),x.age=Math.floor(Math.random()*x.maxAge),d.push(x)}function y(){i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0,0,0,0.04)",i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="source-over";for(var t=0;t<d.length;t++)d[t].step();requestAnimationFrame(y)}y()}else{var m=["#00bcd4","#e040fb","#00bcd4","#e040fb","#4dd0e1","#ce93d8"],v=20,c=1.5,f=144,p=.9995,g=[],M=[],u={"/publications/":{x0:.62,y0:.5,x1:.99,y1:.99},"/projects/":{x0:.55,y0:.52,x1:.99,y1:.99},"/cv/":{x0:.68,y0:.1,x1:.99,y1:.9}}[t]||{x0:.22,y0:.22,x1:.99,y1:.99};function w(){return{x0:window.innerWidth*u.x0,y0:window.innerHeight*u.y0,x1:window.innerWidth*u.x1,y1:window.innerHeight*u.y1}}var b=w();window.addEventListener("resize",function(){b=w()});var A=w(),C=(A.x0+A.x1)/2,q=(A.y0+A.y1)/2,E=.45*(A.x1-A.x0),k=.45*(A.y1-A.y0);for(l=0;l<v;l++){var z=document.createElement("div");z.className="pixel-float",z.style.background=m[Math.floor(Math.random()*m.length)],document.body.appendChild(z),M.push(z),g.push({x:C+2*(Math.random()-.5)*E,y:q+2*(Math.random()-.5)*k,vx:0,vy:0,m:.8+.4*Math.random()})}var P=0,W=0,H=0;for(l=0;l<v;l++)P+=g[l].m,W+=g[l].x*g[l].m,H+=g[l].y*g[l].m;W/=P,H/=P;for(l=0;l<v;l++){var T=g[l].x-W,I=g[l].y-H,O=Math.sqrt(T*T+I*I)+1,S=.7*Math.sqrt(c*P/O);g[l].vx=-S*I/O+.25*(Math.random()-.5),g[l].vy=S*T/O+.25*(Math.random()-.5)}var j=80;function F(){for(var t=g.length,e=new Array(t).fill(0),i=new Array(t).fill(0),a=b.x1-b.x0,n=b.y1-b.y0,o=a/2,r=n/2,h=0,s=0,d=0,l=0;l<t;l++)h+=g[l].m,s+=g[l].x*g[l].m,d+=g[l].y*g[l].m;s/=h,d/=h;var x=new Array(t);for(l=0;l<t;l++){var y=g[l].x-s,m=g[l].y-d,v=Math.sqrt(y*y+m*m);x[l]=g[l].m*Math.tanh(v/j)}for(l=0;l<t;l++)for(var u=g[l],w=l+1;w<t;w++){var A=g[w],C=A.x-u.x,q=A.y-u.y;C>o?C-=a:C<-o&&(C+=a),q>r?q-=n:q<-r&&(q+=n);var E=C*C+q*q+f,k=1/Math.sqrt(E),z=k*k*k;e[l]+=c*x[w]*z*C,i[l]+=c*x[w]*z*q,e[w]-=c*x[l]*z*C,i[w]-=c*x[l]*z*q}for(l=0;l<t;l++)g[l].vx=(g[l].vx+e[l])*p,g[l].vy=(g[l].vy+i[l])*p,g[l].x+=g[l].vx,g[l].y+=g[l].vy,g[l].x<b.x0?g[l].x+=a:g[l].x>=b.x1&&(g[l].x-=a),g[l].y<b.y0?g[l].y+=n:g[l].y>=b.y1&&(g[l].y-=n),M[l].style.left=g[l].x-4+"px",M[l].style.top=g[l].y-4+"px";requestAnimationFrame(F)}F()}}();